# Browser Emulation

# What is this?

Browser Emulation is used to emulate real user like  DDoS requests to bypass Javascript Challenge, it is most commonly used to bypass JS and cookie based DDoS mitigation.

# How does it effect/bypass mitigation?

* Due to browser emulation's behaviour the WAF(Web Application Firewall) cannot differentiate between a real user's request vs a request generated by browser emulation hence the request is not blocked and get passed through the DDoS mitigation stack.

* Mainly when millions of requests gets passed through your server would become unreachable.

*  It uses randomly generated user-agents footprint (Mainly FireFox based).

* Because JS challenge uses **Mouse** movement and **Keyboard** typing to detect if a user is real or not, browser emulation attack can easily emulate both of those movement.


#### A simple example on how does the keyboard/mouse emulation works

Below code uses a libaray called [playwright](https://playwright.dev/docs/api/class-browser) to emulate keyboard and mouse.

```javascript
        browser.newContext({
            locale: locales,
            viewport: fingerprint.screen,
            isMobile: false,
            hasTouch: false,
            inputDevices: [
                {
                    name: 'my-mouse',
                    type: 'mouse',
                    // Emulate a slow mouse movement
                    precision: 10,
                    isTouch: false,
                },
                {
                    name: 'my-keyboard',
                    type: 'keyboard',
                    // Emulate a slow keyboard typing speed
                    layout: 'en-US',
                    repeatDelay: 100,
                    repeatInterval: 50,
                },
            ],
          
```



# How to Mitigate?

[Ref to DDoS mitigation guide to eliminate](linktomitigation)

# How to Detect?

[Ref on how to detect these kind of attcks](linktodetection)

# Links
[Javascript Challenge](https://nginx-extras.getpagespeed.com/modules/js-challenge/)

[Cookie Based DDoS Mitigation](https://nginx-extras.getpagespeed.com/modules/testcookie/)
